<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="styles.css">

    <title>Environmental compensation calculator</title>
</head>

<body>
    <!-- Cabe√ßalho -->
    <header>
        <div class="title">
            <h1>Environmental compensation calculator</h1>
        </div>
        <div class="banner">
            <!-- sua imagem -->
            <img src="img/env_fig.jpeg" alt="Comp">
        </div>
    </header>

    <!-- TABS -->
    <nav class="tabs">
        <button id="tabIsolated" class="tab-button active" onclick="setMode('isolated')">
            Isolated trees
        </button>
        <button id="tabPatch" class="tab-button" onclick="setMode('patch')">
            Patch / area (m¬≤)
        </button>
        <button id="tabApp" class="tab-button" onclick="setMode('app')">
            APP
        </button>
        <button id="tabStatus" class="tab-button" onclick="setMode('status')">
            Species status
        </button>
    </nav>

    <!-- ========== ABA 1: √ÅRVORES ISOLADAS ========== -->
    <!-- Isolated trees tab -->
    <section id="isolatedSection" class="tab-section">
        <h2>√Årvores isoladas</h2>

        <section class="newItem">
            <input
                type="number"
                id="treeQuantity"
                placeholder="Quantidade"
                min="1"
            />

            <select id="treeGroup">
                <option value="native">Nativa</option>
                <option value="exotic">Ex√≥tica</option>
            </select>

            <select id="isolatedMunicipality">
                <option value="">Selecione o munic√≠pio</option>
                <!-- op√ß√µes preenchidas via JS -->
            </select>

            <!-- üî¥ NOVO: endangered dropdown, casa com treeEndangered no JS -->
            <select id="treeEndangered">
                <option value="false">N√£o amea√ßada</option>
                <option value="true">Amea√ßada</option>
            </select>

            <button onclick="addItem()" class="addBtn">Adicionar √† lista</button>
            <button onclick="calculateTotal()" class="calcBtn">Calcular compensa√ß√£o</button>
        </section>

        <section class="messages">
            <div id="errorBox"></div>
            <div id="totalBox">Compensa√ß√£o total do lote: 0</div>
        </section>

        <section class="items">
            <table id="myTable">
                <tr>
                    <th>Quantidade</th>
                    <th>Tipo</th>
                    <th>Munic√≠pio</th>
                    <th>Comp./√°rvore</th>
                    <th>Comp. total item</th>
                    <th>
                        <img
                            src="https://cdn-icons-png.flaticon.com/512/126/126468.png"
                            width="15"
                            height="15"
                            alt="Remover"
                        />
                    </th>
                </tr>
            </table>
        </section>
    </section>

    <!-- ========== ABA 2: PATCH / √ÅREA ========== -->
    <section id="patchSection" class="tab-section" style="display:none;">
        <section class="newItem">
            <select id="patchMunicipality">
                <option value="">Selecione o munic√≠pio</option>
                <!-- op√ß√µes carregadas via JS a partir de /api/municipios -->
            </select>

            <input
                type="number"
                id="patchArea"
                placeholder="√Årea do patch (m¬≤)"
                min="1"
            />

            <button onclick="addPatchItem()" class="addBtn">Adicionar patch</button>
            <button onclick="calculatePatchTotal()" class="calcBtn">Calcular compensa√ß√£o</button>
        </section>

        <section class="messages">
            <div id="errorBoxPatch"></div>
            <div id="totalBoxPatch">Compensa√ß√£o total do lote: 0</div>
        </section>

        <section class="items">
            <table id="patchTable">
                <thead>
                    <tr>
                        <th>Municipality</th>
                        <th>√Årea (m¬≤)</th>
                        <th>Comp./m¬≤</th>
                        <th>Comp. total patch</th>
                        <th>
                            <img
                                src="https://cdn-icons-png.flaticon.com/512/126/126468.png"
                                width="15"
                                height="15"
                                alt="Remover"
                            >
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <!-- linhas preenchidas via JS -->
                </tbody>
            </table>
        </section>
    </section>

    <!-- ========== ABA 3: STATUS DE ESP√âCIES ========== -->
    <section id="statusSection" class="tab-section" style="display:none;">
        <section class="newItem">
          <input type="text" id="statusFamily" placeholder="Family (ex: ACANTHACEAE)" />
          <input type="text" id="statusSpecie" placeholder="Specie (ex: Aphelandra squarrosa Nees)" />
          <button onclick="consultStatus()" class="calcBtn">Consultar status</button>
        </section>
      
        <section class="messages">
          <div id="statusMessage"></div>
        </section>
      
        <section class="items">
          <table id="statusTable">
            <thead>
              <tr>
                <th>Family</th>
                <th>Specie</th>
                <th>Status</th>
                <th>Descri√ß√£o</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </section>
      </section>


<!-- APP compensation tab -->
<section id="appSection" class="tab-section" style="display:none;">
    <h2>Compensa√ß√£o de APP</h2>

    <section class="newItem">
        <select id="appMunicipality">
            <option value="">Selecione o munic√≠pio</option>
        </select>

        <input type="number"
               id="appQuantity"
               placeholder="Quantidade / √°rea"
               min="0" />

        <button onclick="addAppItem()" class="addBtn">Adicionar APP</button>
        <button onclick="calculateAppTotal()" class="calcBtn">Calcular compensa√ß√£o</button>
    </section>

    <section class="messages">
        <div id="errorBoxApp"></div>
        <div id="totalBoxApp">Compensa√ß√£o total de APP: 0</div>
    </section>

    <section class="items">
        <table id="appTable">
            <thead>
                <tr>
                    <th>Munic√≠pio</th>
                    <th>Quantidade / √°rea</th>
                    <th>Comp/unidade</th>
                    <th>Comp. total APP</th>
                    <th>
                        <img src="https://cdn-icons-png.flaticon.com/512/126/126468.png"
                             width="15" height="15" alt="Remover" />
                    </th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </section>
</section>
     
    <!-- JS -->
    <script src="scripts.js"></script>
</body>
</html>
